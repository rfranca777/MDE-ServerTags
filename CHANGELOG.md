# Changelog

All notable changes to MDE ServerTags will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.2.0] â€” 2025-06-14

### ðŸŽ‰ Open Source Release

First public community release of MDE ServerTags.

### Added
- Interactive Setup Wizard with 4-level auto-discovery (CSV â†’ ARM â†’ CLI â†’ MDE)
- `reportOnly` mode for safe, non-destructive simulation runs
- Daily scheduled execution via Windows Task Scheduler
- End-to-End test script with 10 automated validation stages
- HTML report generation with server classification summary
- Azure Policy integration for VM-level MDE tag deployment
- Email notifications for tag changes (SMTP)
- Multi-platform support: Windows Server + Linux (Ubuntu, RHEL, SUSE, Oracle, Debian)
- Ephemeral server detection (VMSS, CI/CD runners, containers)
- Duplicate server cleanup (oldest MDE ID gets `DUPLICADA_EXCLUIR`)
- Inactive server tracking (7-day and 40-day thresholds)
- Batch API calls with retry logic (25 machines per request)
- Community files: README, LICENSE (MIT), CONTRIBUTING, CODE_OF_CONDUCT, SECURITY

### Architecture
- **Core Engine**: `Sync-MDE-ServerTags-BySubscription.ps1` â€” classification and tagging
- **Setup**: `Setup-MDE-ServerTags.ps1` â€” interactive configuration wizard
- **Scheduler**: `Install-ScheduledTask.ps1` + `Run-Daily.ps1` â€” automated daily execution
- **Testing**: `TEST-Lab-E2E.ps1` â€” comprehensive validation
- **Policy**: Azure Policy definition + remediation scripts
- **Deploy**: Azure Automation Account infrastructure deployment

## [2.1.0] â€” 2025-05-01

### Changed
- Improved ARM API fallback when subscription CSV is incomplete
- Better error handling for throttled MDE API responses (429)

### Fixed
- Linux servers with special characters in hostname now handled correctly
- Duplicate detection now case-insensitive

## [2.0.0] â€” 2025-03-15

### Added
- Complete rewrite with modular architecture
- 4-level subscription discovery system
- Lifecycle tag management (EFEMERO, INATIVO_7D, INATIVO_40D, DUPLICADA_EXCLUIR)
- Azure Policy integration module

### Breaking Changes
- Configuration file format changed from flat to structured JSON
- Subscription mapping now auto-generated by Setup Wizard

## [1.0.0] â€” 2025-01-20

### Added
- Initial implementation
- Basic MDE tag synchronization by subscription
- CSV-based subscription mapping
- Console output with classification summary
